<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Événements</title>
    <script>
        async function loadEvents() {
            const response = await fetch('../backend/api.php');
            const events = await response.json();
            let html = '';
            events.forEach(event => {
                html += `<div>
                            <h3>${event.title}</h3>
                            <p>${event.description}</p>
                            <p>Date : ${event.date_time}</p>
                            <p>Lieu : ${event.location}</p>
                            <button onclick="register(${event.id})">S'inscrire</button>
                        </div>`;
            });
            document.getElementById('events').innerHTML = html;
        }
        function register(eventId) {
            fetch(`../backend/register.php`, {
                method: 'POST',
                body: new URLSearchParams({ event_id: eventId, email: prompt("Votre email ?") })
            }).then(() => alert('Inscription réussie !'));
        }
        window.onload = loadEvents;
    </script>
</head>
<body>
    <h1>Événements disponibles</h1>
    <div id="events"></div>
</body>
</html>
